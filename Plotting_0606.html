<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Plotting</title>
    <meta charset="utf-8" />
    <meta name="author" content="Miriam Lerma" />
    <script src="Plotting_0606_files/header-attrs-2.20/header-attrs.js"></script>
    <script src="Plotting_0606_files/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="Plotting_0606_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="Plotting_0606_files/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link rel="stylesheet" href="RZero-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide, bottom, right
background-image: url(https://images.unsplash.com/photo-1570386230314-9fe8204c6f80?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1708&amp;q=80)
background-size: cover

### Plotting
# 

### **Miriam Lerma**&lt;br&gt;
June 2023

---

name: index
class: title-slide, inverse



# Index

- [index](#index)
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)
- [export](#export)
- [contact](#out)

---

class: title-slide, inverse

# Today

.pull-left[

**Your profile**
- You know how to use a Rmd document
- You know how to install packages


**Goals of today**

- Create plots and maps in R
- Change the apparence of the plots
- Export you plots

**Pauses and questions**

- Exercises and 10 minute pauses for catching up
- You can stop me to ask questions or use [this link <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f2cc8f;overflow:visible;position:relative;"><path d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"/></svg>]( https://docs.google.com/document/d/1uG7a2_hkdaKQm5gKXRBFf6gcyoUBan2e69gL3ZKcwg8/edit?usp=sharing)

]

.pull-right[
We will use the packages


```r
devtools::install_github("MiriamLL/sula")
devtools::install_github("MiriamLL/GermanNorthSea")
devtools::install_github("MiriamLL/seamonas")
install.packages('sf')
install.packages('ggspatial')
install.packages('plotly')
```
]

---

class: inverse

# References

.pull-left[
Tutorials/Books ggplot
- [gg is for Grammar of Graphics](https://pkg.garrickadenbuie.com/trug-ggplot2)&lt;br&gt;
- [Introduccion to ggplot](https://englelab.gatech.edu/useRguide/introduction-to-ggplot2.html)  
- [r4ds](https://r4ds.had.co.nz/data-visualisation.html)
- [R Graphics Cookbook](https://r-graphics.org/)
- [Allison Horst tutorial](https://allisonhorst.github.io/rice-data-viz/)

Tutorial/Books maps
- [Geocomputation with R](https://r.geocompx.org/attr.html)
- [Earth Data Science](https://www.earthdatascience.org/)

Gallery/Portafolios
- [Data-Viz-Bookmarks](https://spcanelon.notion.site/spcanelon/Data-Viz-Bookmarks-dc01718020bd4fd6a8a4ca80e6bce933)&lt;br&gt;
- [RGraphGallery](https://www.r-graph-gallery.com/) &lt;br&gt;
- [DataToViz](https://www.data-to-viz.com/) &lt;br&gt;
- [Georgios-Mastodon](https://ecoevo.social/@georgios@vis.social)

Additional
- [Coolors](https://coolors.co/) &lt;br&gt;
]

.pull-right[
&lt;img src="https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/9a306c0a-dac8-413d-ba2e-cc7fd4c4d5c8_rw_1920.png?h=c802991088a9623f1f7aa18c470797ee" height="300" /&gt;

]


---
name: theory

## 1.1. Theory

The objective of a graph/plot/map/chart is to communicate. &lt;br&gt;
In science, the idea is to show information in a clear and understandable way. 

&lt;img src="http://www.typesofgraphs.com/wp-content/uploads/2015/12/Typesofgraphs.png" height="350" /&gt;
  
Fuente:  [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

## 1.1. Theory

Plotting is transforming data to visualizations that vary in shape, size and colors.

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_1.jpg" height="350" /&gt;
  
Fuente:  [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

## 1.1. Theory

There are many ways to plot data, and different ways to interpretate the graphs.

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_2.jpg" height="350" /&gt;
  
Fuente:  [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)


---

## 1.1. Theory

Which one is more intuitive?

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_4.jpg" height="350" /&gt;

Fuente:  [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

## 1.1. Theory

Which one should I use?

You can try different plots and choose the one that betters tells the story.

**Tableau Public** has a suggestion on which graph to use according to the type of data you are using.

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_5.jpg" height="300" /&gt;

---

name: intro

## 1.2. Intro

There are many packages to create plots in R.
- Here we will use **ggplot2**.


ggplot is the most versatile one, and from which you can find more help and inspiration.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/ggplot2hex.png?raw=true" height="200" /&gt;

---

## 1.2. Intro

It can be divided in three main components:

- **Data** (data): which are the variables that we plot.
- **Geometry** (geom): a geometric object such as dots, lines, bars.
- **Aesthetics** (aes): the aesthetic attributes to a geometric object, such as position, color, shape and size. 
  

Each component is displayed as **layers**.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/300Geoms.png?raw=true" height="200" /&gt;
  

Source [ggplot2 book](https://englelab.gatech.edu/useRguide/working-with-data-overview.html)

---

## 1.3. Data



The package ggplot is already included in tidyverse. &lt;br&gt; If you have installed tidyverse you just need to call your package.


```r
library(tidyverse)
```

If not you can also install it separately. 

```r
install.packages("ggplot2")
```

---

## 1.3. Data

For the exercises, we can use data from packages.&lt;br&gt;
Lets add our object to our **environment**.

Package with data

```r
library(palmerpenguins)
penguins&lt;-penguins
```

Call library **ggplot2**.


```r
library(ggplot2)
```

---

## 1.3. Data

First step: add data to a plot.


```r
ggplot(data=penguins)
```

![](Plotting_0606_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;


We told ggplot what data frame we want to use, but need to give instruction on how to plot. &lt;br&gt;

---

## 1.3. Add axis

Using **mapping**  we tell ggplot what to plot in the x and y axis.&lt;br&gt;

**Note** that the axis are columns from your data frame. This is when having tidydata is important.


```r
ggplot(data=penguins,
*      mapping=aes(x=bill_length_mm,
*                  y=bill_depth_mm))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;


---

## 1.3. Geometry

The next step is to give it a geometry, in this case we say plot points with the argument **geom_point**


```r
ggplot(data=penguins,
       mapping=aes(x=bill_length_mm,y=bill_depth_mm))+
*      geom_point()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

It would likely show a **warning**. &lt;br&gt;
This is because NAs are not going to be plotted and R is trying to warn you.


---

## 1.3. Geometry

There are many **geometries**.

Most of them start with **geom_***

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/302geometries.png?raw=true" height="400" /&gt;


---

## 1.3. Geometry

Examples of most common geometries are to be found on [R-graph-gallery](https://r-graph-gallery.com/).

.pull-left[
&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/302examples.png?raw=true" height="150" /&gt;

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/306examples.png?raw=true" height="200" /&gt;
]

.pull-right[
&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/307examples.png?raw=true" height="200" /&gt;

]

---

## 1.4. Common mistakes

The most common mistakes with plotting are the same as while writing code.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/023DebuggingBingo.jpg?raw=true" height="450" /&gt;

---

## 1.4. Common mistakes

Not having **tidydata** is also a very common problem.  

 
&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/104TidyData.jpg?raw=true" height="300" /&gt;
  
Source [Allison Horst](https://allisonhorst.com/) 

---

## 1.4. Common mistakes

Other common mistakes specific to ggplot are:

- Forgetting a plus symbol ( **+** )

```r
ggplot(data=penguins, 
       mapping=aes(x=bill_length_mm,y=flipper_length_mm))
  geom_point()
```

- Adding the **+** on the wrong order

```r
ggplot(data=penguins, 
       mapping=aes(x=bill_length_mm,y=flipper_length_mm))
 +geom_point()
```

- Forgetting a parenthesis

```r
ggplot(penguins, 
*      aes(x=bill_length_mm,y=flipper_length_mm)+
       geom_point()
```

---

## 1.5. Cheat sheet

Help&gt;CheatSheets&gt;Data Visualization with ggplot


&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/314cheatsheet.png?raw=true" height="400" /&gt;

---

## 1.6. Simplify 

We can skip writing **data=** and **mapping=** by just following the order of the elements.

Both codes give the same output.

.pull-left[

Including the elements.

```r
ggplot(data=penguins, 
       mapping=aes(x=bill_length_mm,
                   y=flipper_length_mm))+
  geom_point()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;
]

.pull-right[

Simplified example.


```r
ggplot(penguins, 
       aes(x=bill_length_mm,
           y=flipper_length_mm,))+
  geom_point()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;
]

---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;
Open the file [03ExercisesPlotting.Rmd](https://github.com/MiriamLL/R_intro/blob/master/03ExercisesPlotting.Rmd)

Run first part.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/316RmdIcon.png?raw=true" height="50" /&gt;

You should get this plot.

![](Plotting_0606_files/figure-html/unnamed-chunk-31-1.png)&lt;!-- --&gt;

]

.pull-right[
Until here:
- [theory](#theory)


Next part:
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)
- [maps](#custom-map)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [export](#export)
- [contact](#out)
]


---

name: geometries
class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1639303638626-2003b9ac307e?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80)
background-size:cover

.pull-right[
#  &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Geometries&lt;/span&gt;
### &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Different displays&lt;/span&gt;
]


---
name: scatterplot

## 2.1. Scatterplots

The scatterplot is most useful for displaying the relationship between two continuous variables. Each dot represents an observation. Their position on the x (horizontal) and y (vertical) axis represents the values of the 2 variables. 

The argument to create scatterplots is **geom_point**


```r
ggplot(data=penguins,
       mapping=aes(x=bill_length_mm,y=bill_depth_mm))+
* geom_point()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-32-1.png)&lt;!-- --&gt;

See more [scatterplots](https://r-graph-gallery.com/scatterplot.html)

---
name: lines

## 2.2. Line chart

A line chart or line graph displays the evolution of one or several numeric variables. &lt;br&gt;
Data points are connected by straight line segments. 

The argument to create line charts is **geom_line()** 


```r
ggplot(data=penguins,
       mapping=aes(x=bill_length_mm,y=bill_depth_mm))+
* geom_line()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;

See more [line chart](https://r-graph-gallery.com/line-plot.html)

---

name: barplot

## 2.3. Barplot

A barplot is used to display the relationship between a numeric and a categorical variable.&lt;br&gt;

The argument to create barplots is **geom_bar()** 


```r
ggplot(data=penguins,
       mapping=aes(x=species,y=body_mass_g))+
* geom_bar()
```
Error: stat_count() can only have an x or y aesthetic.

Different from the logic of the previous plots, we need to tell what do you want inside the bars by adding **stats=**.

---

## 2.3. Barplot

The argument **stats=** is to be included inside the parethesis of **geom_bar**


```r
ggplot(data=penguins,
       mapping=aes(x=species,y=body_mass_g))+
* geom_bar(stat='identity')
```

![](Plotting_0606_files/figure-html/unnamed-chunk-35-1.png)&lt;!-- --&gt;

See more [barplots](https://r-graph-gallery.com/barplot.html)

---

name: boxplot

## 2.4. Boxplot

Boxplot is probably the most commonly used chart type to compare distribution of several groups.&lt;br&gt;

It visualises five summary statistics (the median, two percentiles and two whiskers).

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/305boxplot.png?raw=true" height="350" /&gt;

Source [boxplot explanation](https://www.leansigmacorporation.com/box-plot-with-minitab/)

---

## 2.4. Boxplot

The argument to create boxplots is **geom_boxplot()** 


```r
ggplot(data=penguins,
       mapping=aes(x=species,y=body_mass_g))+
* geom_boxplot()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-37-1.png)&lt;!-- --&gt;

See more [boxplots](https://r-graph-gallery.com/boxplot.html)

---

name: trajectory

## 2.5. Trajectory

For plotting moving objects, connecting points with a line is the most common visualization used.

--

For today exercises, install **sula**.


```r
devtools::install_github("MiriamLL/sula")
```

The package **sula** contains tracking data from Masked boobies on Easter Island.


```r
library(sula)
```

To plot a trajectory, lets load data from the package **sula** into the environment.


```r
tracking_data&lt;-sula::GPS_raw
```

The data frame contains the columns **Latitude** and **Longitude**.


---

## 2.5. Trajectory

The argument to create trajectories is **geom_path()**. 

By definition geom_path() connects the observations in the order in which they appear in the data.


```r
ggplot(data=tracking_data, 
       mapping=aes(x=Latitude, y=Longitude)) +
* geom_path()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-41-1.png)&lt;!-- --&gt;

---

## 2.6. Maps

R is an great tool for geospatial data analysis. 

The book [geocomputation with R](https://r.geocompx.org/attr.html) is a recommended guide to create maps in R (and is constantly updated).

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/306Book.png?raw=true" height="400" /&gt;

---

## 2.6. Maps

For today exercises, install **GermanNorthSea**.


```r
devtools::install_github("MiriamLL/GermanNorthSea")
```

The package **GermanNorthSea** compiles shapefiles from the North Sea.


```r
library(GermanNorthSea)
```

To see the containing shapefiles go to my [github](https://github.com/MiriamLL/GermanNorthSea).

To add shapefile to environment.


```r
Europe&lt;-German_land
```

**Note** that shapefiles can be an **sf** object. An sf object is different from a data frame, if we click on the object is not clear what it contains.


```r
class(Europe)
```

```
## [1] "sf"         "data.frame"
```

---

## 2.6. Maps

The argument to create a map is **geom_sf()** 


```r
ggplot(data=Europe)+ 
* geom_sf()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-47-1.png)&lt;!-- --&gt;

---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;
Open the file [03ExercisesPlotting.Rmd](https://github.com/MiriamLL/R_intro/blob/master/03ExercisesPlotting.Rmd)

Run the code for plotting different geometries.

**Note** to see the plot in a separated window, search for the following icon.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/314Icon.jpg?raw=true" height="150" /&gt;

]

.pull-right[
Until here:
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)

Next part:
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)
- [export](#export)
- [contact](#out)
]

---

name: maps
class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1518065896235-a4c93e088e7a?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80)
background-size: cover

.pull-right[
#  &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Maps&lt;/span&gt;
### &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Elements of a map&lt;/span&gt;
]

---


## 3.Maps

What makes a map a map?

A map is a symbolic representation of selected characteristics of a place, usually drawn on a flat surface. 

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/317PaulaScher.png?raw=true" height="350" /&gt;

Source [Paula Scher](https://www.pentagram.com/news/paula-scher-maps)

---

## 3.1. Shapefile

A [shapefile](https://en.wikipedia.org/wiki/Shapefile) is a format for geospatial vector data.

For the exercises download the shapefile from [Europe](https://github.com/MiriamLL/R_intro/blob/master/Downloads/Europe.shp).

Give the directory where you save your shapefile, either by calling the package **here**...


```r
library(here)
My_directory&lt;-here('Downloads')
```

... or manually by adding the directory where your shapefile is.


```r
My_directory&lt;-"..."
```

Check that the folder contains your shapefile.


```r
list.files(My_directory)
```


```r
My_shapefile&lt;-paste0(My_directory,"/Europe.shp")
```

---

## 3.1. Shapefile

The package **sf** contains arguments to load shapefiles in R.


```r
library(sf)
```

&lt;img src="https://user-images.githubusercontent.com/520851/34887433-ce1d130e-f7c6-11e7-83fc-d60ad4fae6bd.gif" height="200" /&gt;

Visit the [sf page](https://r-spatial.github.io/sf/).


---

## 3.1. Shapefile

The argument **st_read** loads the shapefile into the environment.


```r
Europe_shp&lt;-st_read(My_shapefile)
```

```
## Reading layer `Europe' from data source 
##   `C:\Users\lerma\OneDrive\Documents\2MonTrack\2023\Teaching\R_intro\R_intro\Downloads\Europe.shp' 
##   using driver `ESRI Shapefile'
## Simple feature collection with 54 features and 2 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -31.26575 ymin: 32.39748 xmax: 69.07032 ymax: 81.85737
## Geodetic CRS:  WGS 84
```




**Note** that it gives us the Geodetic CRS: WGS 84

---

## 3.2. Create a basic map

Load the package ggplot2


```r
library(ggplot2)
```

Plot your shapefile using **geom_sf**


```r
ggplot(data = Europe_shp)+  
  geom_sf()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-58-1.png)&lt;!-- --&gt;



---

## 3.3. Add limits

Using the argument **coord_sf** and adding the coordinates in the x axis **xlim** and the y axis **ylim** we can focus in the area of interest.


```r
ggplot(data = Europe_shp)+  
  geom_sf()+
  coord_sf(xlim = c(6, 10),ylim = c(53, 56))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-59-1.png)&lt;!-- --&gt;

---
name: scale

## 3.4. Add scale

To add more elements on a map, the package [ggspatial](https://paleolimbot.github.io/ggspatial/) contains scale and north arrow.


```r
library(ggspatial)
```

The argument **annotation_scale** adds a scale.   
By including **br** the scale is set to the **b**ottom **r**ight.


```r
ggplot(data = Europe_shp)+  
  geom_sf()+
  coord_sf(xlim = c(6, 10),ylim = c(53, 56))+
* annotation_scale(location = "br")
```

![](Plotting_0606_files/figure-html/unnamed-chunk-61-1.png)&lt;!-- --&gt;


---
name: arrow

## 3.5. Add arrow

For including an arrow add the argument **annotation_north_arrow**.

Include **tl** to set the scale on the **t**op **l**eft


```r
ggplot(data = Europe_shp)+  
  geom_sf()+
  coord_sf(xlim = c(6, 10),ylim = c(53, 56))+
    annotation_scale(location = "br")+
*   annotation_north_arrow(location = "tl")
```

![](Plotting_0606_files/figure-html/unnamed-chunk-62-1.png)&lt;!-- --&gt;

---

## 3.5. Add arrow

There are many options for **annotation_north_arrow**.

Including **style = north_arrow_minimal()** makes a more minimalistic type of arrow. 


```r
ggplot(data = Europe_shp)+  
  geom_sf()+
  coord_sf(xlim = c(6, 10),ylim = c(53, 56))+
    annotation_scale(location = "br")+
    annotation_north_arrow(location = "tl", 
*                          style = north_arrow_minimal())
```

![](Plotting_0606_files/figure-html/unnamed-chunk-63-1.png)&lt;!-- --&gt;

---

## 3.6. CRS

A coordinate reference system (CRS) refers to the way in which spatial data that represent the earth’s surface. 

⚠️ It is important to understand the coordinate system that your data uses - particularly if you are working with different data stored in different coordinate systems. 

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/313CRSdeformation.jpg?raw=true" height="350" /&gt;

---

## 3.6. CRS

All maps are distorted and all projections have some error to represent the earth perfectly.

The error is also depending on the [origin](https://www.earthdatascience.org/courses/use-data-open-source-python/intro-vector-data-python/spatial-data-vector-shapefiles/intro-to-coordinate-reference-systems-python/).

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/318CRS.png?raw=true" height="350" /&gt;


---

## 3.6. CRS

Not using the correct projection might derive in calculation mistakes (over or under calculating distances).

If we want to change the CRS of your shapefile, the argument **st_transform** from the package **sf** let us do so.


```r
Europe_3035&lt;-sf::st_transform(Europe_shp, 3035)
```

.pull-left[
CRS **4326**

![](Plotting_0606_files/figure-html/unnamed-chunk-67-1.png)&lt;!-- --&gt;
]

.pull-right[

CRS **3035**

![](Plotting_0606_files/figure-html/unnamed-chunk-68-1.png)&lt;!-- --&gt;
]

Do you notice the **differences?**

---

## 3.6. CRS

**Note** that when using the map with the **CRS 3035**, the units of **xlim** and my **ylim** need to be changed accordingly.


```r
ggplot(data=Europe_3035)+ 
  geom_sf()+
* coord_sf(xlim = c(3790000,4250000), ylim = c(3350000,3680000))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-69-1.png)&lt;!-- --&gt;

---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;
Open the file [03ExercisesPlotting.Rmd](https://github.com/MiriamLL/R_intro/blob/master/03ExercisesPlotting.Rmd)

Run the third part.
Change elements from the map if you want to.

![](Plotting_0606_files/figure-html/unnamed-chunk-70-1.png)&lt;!-- --&gt;
]

.pull-right[
Until here:
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)

Next part:
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)
- [export](#export)
- [contact](#out)
]


---

name: aesthetics
class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1653408604619-45713aad6d75?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80)
background-size:cover

.pull-right[
#  &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Aesthetics&lt;/span&gt;
### &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Bring some colors&lt;/span&gt;
]

---
 
## 4. Aesthetics

**Aesthetics** are for controlling the overall appearance of graphs.

You can change almost every tiny detail to create the plot that you want.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/308parts-ggplot.png?raw=true" height="350" /&gt;

Source [ggplot2 elements](https://isabella-b.com/blog/ggplot2-theme-elements-reference/)&lt;br&gt;
Download [pdf](https://isabella-b.com/files/ggplot2-theme-elements-reference-v2.pdf)

---

## 4. Aesthetics

There are many elements, but I will not go into detail to most of them.

For going into more detail the book [R Graphics cookbook](https://r-graphics.org/) is a great guide.

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/310Cookbook.jpg?raw=true" height="300" /&gt;


---

name: color

## 4.1. Color by name

To go beyond the default colors, the package ggplot2 allows you to change colors on the elements of your plot. 

To select the colors there are several ways, I use by **name** or **hex codes**.

Using by **name**, the default names are used.

.pull-left[
You can see a complete list of the 657 colors typing colors(). 


```r
colors()
```
]

.pull-right[

You can also see the color and the name by opening this [link](https://github.com/MiriamLL/R_intro/blob/master/Images/311colornamesplot.png?raw=true).

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/311colornamesplot.png?raw=true" height="300" /&gt;


]


---

## 4.1. Color by hexcode

Colors can also be defined by their **hex code**. An hex code is the code of the color in 6 digits.

To find the hex code there are tons of webpages. I personally like [coolors](https://coolors.co/palettes/trending).

&lt;img src="https://github.com/MiriamLL/R_intro/blob/master/Images/312coolors.png?raw=true" height="300" /&gt;

---

## 4.1. Fill color

For a map, we can change the color of our shapefile by adding the argument **colour** and **fill** inside the brackets of **geom_sf()**


```r
ggplot(data = Europe_shp)+  
* geom_sf(color = "orange",
*         fill = "yellow")+
  coord_sf(xlim = c(3, 9),ylim = c(53, 56))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-76-1.png)&lt;!-- --&gt;


---

## 4.1. Fill color

To use the color by **hex code** you need to add a **#**.

In [coolors](https://coolors.co/palettes/trending) go to explore&gt;put your cursor on top of the color you like&gt;click&gt;paste on your code


```r
ggplot(data = Europe_shp)+  
*   geom_sf(color = "#e76f51",
*           fill = "#e9c46a")+
      coord_sf(xlim = c(3,9), ylim = c(53,56))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-77-1.png)&lt;!-- --&gt;

---

## 4.2. Object

To simplify the process, you can save your plot as an object in the environment.


```r
My_plot&lt;-ggplot(data = Europe_shp)+  
*   geom_sf(color = "#e76f51",
*           fill = "#e9c46a")+
      coord_sf(xlim = c(3,9), ylim = c(53,56))
```

The map is now contained in an object.


```r
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-79-1.png)&lt;!-- --&gt;

---
name: theme

## 4.3. Theme

Themes are a powerful way to customize the non-data components of your plots: i.e. titles, labels, fonts, background, gridlines, and legends.

Themes can be used to give plots a consistent customized look. 

.pull-left[

The theme can be changed using **theme_classic()** 


```r
My_plot+
* theme_classic()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-80-1.png)&lt;!-- --&gt;

]

.pull-right[

The theme can be changed using **theme_bw()**


```r
My_plot+
* theme_bw()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-81-1.png)&lt;!-- --&gt;

]

---

## 4.3. Theme

There are many different themes. It would depend on the type of graph and taste to choose.

.pull-left[

he theme can be changed using **theme_minimal()**


```r
My_plot+
* theme_minimal()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-82-1.png)&lt;!-- --&gt;
]

.pull-right[

he theme can be changed using **theme_void()**


```r
My_plot+
* theme_void()
```

![](Plotting_0606_files/figure-html/unnamed-chunk-83-1.png)&lt;!-- --&gt;

]


---

## 4.3. Theme

For maps, in my opinion **theme_bw** is the one that makes most sense.

So lets added to our object using the **+** symbol. 


```r
My_plot&lt;-My_plot+
* theme_bw()
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-84-1.png)&lt;!-- --&gt;

---

name: background

## 4.4. Background colors

Adding the argument **theme** and then **panel.background** we can change the color of the background.


```r
My_plot&lt;-My_plot +
* theme(panel.background = element_rect(fill = '#a8dadc'))
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-85-1.png)&lt;!-- --&gt;

---

## 4.4. Background colors

To remove the grids from the background, we can add **element_blank** inside the argument **theme**.


```r
My_plot&lt;-My_plot +
* theme(panel.grid.major = element_blank(),
*       panel.grid.minor = element_blank())
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-86-1.png)&lt;!-- --&gt;


---
name: axis

## 4.5. Axis legends

To change the legends on the axis, we can add the arguments **xlab** and **ylab**


```r
My_plot&lt;-My_plot +
* xlab('Longitude')+ylab('Latitude')
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-87-1.png)&lt;!-- --&gt;

---

## 4.6. Add degrees

To add the degrees on the x and y axis legends, use a function on **scale_x_continuous** and **scale_y_continuous**.

**This is specific from when plotting maps**


```r
My_plot&lt;-My_plot +
*   scale_x_continuous(labels = function(x) paste0(x, '\u00B0', "W")) +
*   scale_y_continuous(labels = function(x) paste0(x, '\u00B0', "N"))
My_plot
```

![](Plotting_0606_files/figure-html/unnamed-chunk-88-1.png)&lt;!-- --&gt;


---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;
Open the file [03ExercisesPlotting.Rmd](https://github.com/MiriamLL/R_intro/blob/master/03ExercisesPlotting.Rmd)

Run the fourth part.

Change the theme, color, or other elements if you want.


```r
Base_map&lt;-ggplot(data = Europe_shp)+ 
    geom_sf(color = "#e76f51", 
            fill = "#e9c46a")+ 
  coord_sf(xlim = c(3,9), ylim = c(53,56))+
  theme_bw()+
  theme(panel.background = element_rect(fill = '#a8dadc'),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank())+
  
  xlab('Longitude')+ylab('Latitude')+
  scale_x_continuous(labels = function(x) paste0(x, '\u00B0', "W"))+
  scale_y_continuous(labels = function(x) paste0(x, '\u00B0', "N"))
Base_map
```

![](Plotting_0606_files/figure-html/unnamed-chunk-89-1.png)&lt;!-- --&gt;

]

.pull-right[
Until here:
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [color](#color)
- [theme](#theme)
- [background](#background)
- [axis](#axis)

Next part:
- [export](#export)
- [contact](#out)
]


---

name: add
class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1553864250-05b20249ee0c?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80)
background-size:cover

.pull-right[
#  &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Add geometry&lt;/span&gt;
### &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Level up&lt;/span&gt;
]

---

## 5. Survey data

To add observations on a map, we can add more geometries.

The package **seamonas** contains data from a hypothetical survey.


```r
library(seamonas)
```

To add the data to your environment. &lt;br&gt;


```r
survey_4326&lt;-survey_4326
```

The data frame contains the columns **latitude** and **longitude**.


```r
head(survey_4326,5)
```

---

## 5.1. Add points

Because ggplot functions as layers, we can add geometries on top of each other.

The order needs to be considered, the geometry to be on the top should be the last on the list.

Using the argument **geom_point** we can add points.


```r
Base_map+
* geom_point(data=survey_4326,aes(x = longitude,y= latitude))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-93-1.png)&lt;!-- --&gt;


---

## 5.2. Change color

Adding the argument **color** inside the parethesis allows to change the color of the points.


```r
Base_map+
  geom_point(data=survey_4326,aes(x = longitude,y= latitude),
*            color='red')
```

![](Plotting_0606_files/figure-html/unnamed-chunk-94-1.png)&lt;!-- --&gt;


---

## 5.2.  Change color

If you wish to color by a categorical variable, then add **colour =** within your aes brackets. This tells ggplot that this third variable will colour the points. 


```r
Base_map+
  geom_point(data=survey_4326,aes(x = longitude,y= latitude, 
*                                 color=month))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-95-1.png)&lt;!-- --&gt;

---

## 5.2.  Select colors

The colors, when not declared, are selected by default.&lt;br&gt;
To customize your colors you can add more arguments. &lt;br&gt;
The argument **scale_colour_manual** allows you to customize those colors. &lt;br&gt;
You can add colors by **name**.&lt;br&gt;

Be careful and always add the same number of colors according to the category.


```r
Base_map+
  geom_point(data=survey_4326,aes(x = longitude,y= latitude, 
                                  color=month))+
* scale_colour_manual(values = c("purple", "yellow", "orange","green","blue"))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-96-1.png)&lt;!-- --&gt;

---

## 5.3. Change size

Adding the argument **size** inside geometric point, we can increase or decrease the size of the point.


```r
Base_map+
  geom_point(data=survey_4326,aes(x = longitude,y= latitude),
             size=0.01)
```

![](Plotting_0606_files/figure-html/unnamed-chunk-97-1.png)&lt;!-- --&gt;

---

## 5.4. Add path

The argument **geom_path** can be used for trajectories.


```r
Base_map+
* geom_path(data=survey_4326,aes(x = longitude,y= latitude))
```

![](Plotting_0606_files/figure-html/unnamed-chunk-98-1.png)&lt;!-- --&gt;

---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;

Change the data, theme, colors, or other elements of the points if you want.


```r
Base_map+
  geom_point(data=survey_4326,
             aes(x = longitude,
                 y= latitude,
                 color=month))+
  scale_colour_manual(
    values = c("purple",
               "yellow", 
               "orange",
               "green",
               "blue"))
```

]

.pull-right[
Until here:
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)

Next part:

- [export](#export)
- [contact](#out)
]


---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1501868984184-76121ed6a6e2?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80)
background-size: cover

.pull-right[
#  &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Export&lt;/span&gt;
### &lt;span style=" font-weight: bold;    color: #e5e5e5 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #003049 !important;" &gt;Beyond static maps&lt;/span&gt;
]

---

## 6.1. Interactive

Graphs can be interactive.

The package **plotly** allows creating interactive maps.

To install the package.


```r
install.packages('plotly')
```

See more about [plotly](https://plotly.com/r/).

- Alternative use [tmap](https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html).

---

## 6.1. Interactive

Call the package.


```r
library(plotly)
```

Control the information displayed by adding more elements in geom_point.


```r
*ggplotly(Base_map+
  geom_point(data=survey_4326,aes(x = longitude,y= latitude, 
                                  color=date))+
  scale_colour_manual(values = c("purple", "yellow", "orange","green","blue"))
)
```


---

## 6.2. Animate

Animated plots can also be created in R.

However, doing this during a R session would be very time consuming.

To recreate the animation, you can see my [blog](www.miriam-lerma.com/blog).


&lt;img src="https://github.com/MiriamLL/miriamlerma_/blob/main/animation.gif?raw=true" height="350" /&gt;

---

name: export

## 6.3. export

To export a plot as a figure there is **ggsave**.

Specify the folder where you want the plot to be exported to.


```r
ResultsFolder&lt;-here('Downloads')
```

Using the function **ggsave** it would be exported.

You can change the extension (.png, .jpg, etc), the width, length, units and dpi. 


```r
ggsave(My_plot, 
       filename = paste0(ResultsFolder,"/My_plot.png"),
       width = 24, 
       height = 24, 
       units = "in",
       dpi = 500)
```

---

## 6.4. word

Another way to export maps is to use a Rmd file like the one on the [link](https://raw.githubusercontent.com/MiriamLL/R_intro/master/04PlotWord.Rmd).

For exporting to word, consider:  
- Not including the code, write **echo=FALSE** in your code chunk.  
- Not including messages, write **message=FALSE** in your code chunk.  
- Not including warnings, write **warning=FALSE** in your code chunk.  


```r
{r,echo=FALSE, warning=FALSE, message=FALSE}
```

To adjust the size of the maps you can specify the fig.height and fig.width in the code chunk


```r
{r,fig.height=10, fig.width=10}
```


---

## 6.5. html

The best way to export interactive maps is to use Rmd to html like the one on the [link](https://raw.githubusercontent.com/MiriamLL/R_intro/master/05PlotInteractive.Rmd).

Just remember to change the output on the YAML to **html**.


```r
output: html_document
```

---

class: inverse

# Pause

.pull-left[
Practice <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#FFFFFF;overflow:visible;position:relative;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&lt;br&gt;
Change some elements from the Rmds. 
Change the data used or the geometry. 
Export your plots.

]

.pull-right[
Until here:
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [shapefiles](#shapefiles)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [color](#color)
- [background](#background)
- [axis](#axis)
- [export](#export)
- [contact](#out)
]


---

name: out
class: title-slide
background-image: url(https://images.unsplash.com/photo-1609875133891-443f423fb378?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=687&amp;q=80)

background-size: cover

### Back to
- [index](#index)
- [theory](#theory)
- [scatterplot](#scatterplot)
- [line chart](#lines)
- [barplot](#barplot)
- [trajectory](#trajectory)
- [maps](#maps)
- [limits](#limits)
- [scale](#scale)
- [arrow](#arrow)
- [aesthetics](#aesthetics)
- [theme](#theme)
- [background](#background)
- [axis](#axis)
- [export](#export)

.right[
### Contact
This materials are free of use &lt;br&gt; Download the presentation here: [<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f2cc8f;overflow:visible;position:relative;"><path d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"/></svg>github](https://github.com/MiriamLL/R_intro) and  [<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f2cc8f;overflow:visible;position:relative;"><path d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"/></svg>webpage](https://www.miriam-lerma.com/posts/2023-06-06-plotting/)
]

.right[

[<svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f2cc8f;overflow:visible;position:relative;"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg>Home](https://www.miriam-lerma.com/teaching.html)
[<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f2cc8f;overflow:visible;position:relative;"><path d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg> Index ](https://miriamll.github.io/R_intro/Plotting_0606.html#2)

]

&lt;br&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
